package com.msaProjectMenu01.menu.service;

import java.io.File;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Service;
import org.springframework.web.multipart.MultipartFile;

import com.msaProjectMenu01.core.util.Util;

@Service
public class MenuService {

	@Value("${upload.path}")
	private String uploadFilePath;
	
	public void createProduct(String productName, String productPrice, MultipartFile imageFile) throws Exception {
		
		String orginFileNm = imageFile.getOriginalFilename();
        String fileNm = Util.getUuid("", orginFileNm);
        String ext = "";
        if(orginFileNm.indexOf(".") > -1) {
        	ext = orginFileNm.substring(orginFileNm.indexOf(".")); 
        }
        
        // 디레토리가 없다면 생성
 		File dir = new File(uploadFilePath);
 		if (!dir.isDirectory()) {
 			dir.mkdirs();
 		}
        
        String saveFilePath = uploadFilePath + File.separator + fileNm + ext;
        
        File serverFile = new File(saveFilePath);
        imageFile.transferTo(serverFile);
	}
}
